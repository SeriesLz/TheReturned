<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Series Episodes</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
<style>
body {
  background-color: #121212;
  color: #ffffff;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}
.container {
  padding: 20px;
  padding-bottom: 80px;
}
.video-container {
  position: relative;
  width: 100%;
  max-width: 900px; /* Limita el ancho del reproductor */
  margin: 0 auto;    /* Centra horizontalmente */
  aspect-ratio: 16 / 9;
  background-color: #121212;
  z-index: 1000;
  border-radius: 12px;
  overflow: hidden;
}

.video-container iframe {
  width: 100%;
  height: 100%;
  border: none;
}
.content {
  margin-top: 20px;
}
.dropdowns {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-bottom: 20px;
  gap: 10px;
}
.dropdowns select {
  background-color: #333;
  color: #fff;
  border: none;
  padding: 10px;
  font-size: 16px;
  border-radius: 5px;
}
.episode-list {
  list-style: none;
  padding: 0;
  max-height: 400px;
  overflow-y: auto;
}
.episode-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: #1e1e1e;
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 5px;
  cursor: pointer;
}
.episode-item img {
  width: 80px;
  height: 45px;
  border-radius: 5px;
  margin-right: 10px;
}
.episode-info {
  flex-grow: 1;
}
.episode-info h3 {
  margin: 0;
  font-size: 18px;
}
.episode-info p {
  margin: 5px 0 0;
  color: #888;
}
.toggle {
  display: flex;
  align-items: center;
}
.toggle label {
  margin-right: 10px;
}
.toggle input[type="checkbox"] {
  width: 40px;
  height: 20px;
  appearance: none;
  background-color: #555;
  border-radius: 10px;
  position: relative;
  outline: none;
  cursor: pointer;
}
.toggle input[type="checkbox"]:checked {
  background-color: #0f0;
}
.toggle input[type="checkbox"]::before {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  background-color: #fff;
  border-radius: 50%;
  top: 1px;
  left: 1px;
  transition: 0.3s;
}
.toggle input[type="checkbox"]:checked::before {
  transform: translateX(20px);
}
.bottom-nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  background-color: #312e2e;
  display: flex;
  justify-content: space-around;
  padding: 15px 0;
}
.bottom-nav a {
  color: #888;
  text-align: center;
  text-decoration: none;
  flex-grow: 1;
}
.bottom-nav a.active {
  color: rgb(136, 5, 5);
}
.bottom-nav a i {
  font-size: 24px;
}
.bottom-nav a span {
  display: block;
  font-size: 12px;
  margin-top: 4px;
}
.synopsis {
  display: none;
  background-color: #222;
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 20px;
  font-size: 15px;
  line-height: 1.6;
}
.synopsis-button {
  background-color: #333;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 15px;
  cursor: pointer;
  font-size: 15px;
  margin-left: 10px;
  white-space: nowrap;
}
</style>
</head>
<body>

<!-- Video principal -->
<div class="video-container">
  <iframe allowfullscreen id="main-video" src="__URL_PRINCIPAL__"></iframe>
</div>

<div class="container">
  <div class="content">
    <div class="dropdowns">
      <select id="season-select">
        <option value="season1">Temporada 1</option>
      </select>
      <button class="synopsis-button" onclick="toggleSynopsis()">Ver sinopsis</button>
    </div>

    <div class="synopsis" id="synopsis">
      <p>Un pequeño pueblo que se pone patas arriba cuando varias personas locales, que durante mucho tiempo se dieron por muertas, reaparecen repentinamente...</p>
    </div>

    <h2>The Returned</h2>
    <div id="last-watched-info" style="color: #ccc; margin-bottom: 10px;"></div>
    <div id="progress-info" style="color: #999; font-size: 14px; margin-bottom: 20px;"></div>

    <button id="reset-progress" style="background-color: #660000; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; margin-bottom: 20px;">
      Reiniciar progreso
    </button>

    <ul class="episode-list" id="episode-list">
      <!-- Ejemplo episodio -->
      <li class="episode-item" data-video-url="__URL__" data-season="season1">
        <img src="https://image.tmdb.org/t/p/w300/nt212kJvFvUCuDeOO4E5UqRsG37.jpg" alt="Thumbnail">
        <div class="episode-info">
          <h3>Episode 1</h3>
          <p>T1 - EP1</p>
        </div>
        <div class="toggle">
          <label>NO VISTO</label>
          <input data-episode="1" type="checkbox" />
        </div>
      </li>
	  
<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/nKCrw5qLgmXKbXxZ28eVtIAzL0l.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 2</h3>
<p>T1 - EP2</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="2" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/dDLkBeJhfoNEqoqzDKbfZPYFuW7.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 3</h3>
<p>T1 - EP3</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="3" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/gD4fSzszy71Nv8KeoZYd1mLhKJw.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 4</h3>
<p>T1 - EP4</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="4" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/AeuxI0ddzTY6PRYq3V73AkEHFjx.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 5</h3>
<p>T1 - EP5</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="5" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/1iglKOvzpPETcrLwkSAtYhh54Ba.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 6</h3>
<p>T1 - EP6</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="6" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/hWGjo5D3hJTKJp68moREujbfExB.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 7</h3>
<p>T1 - EP7</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="7" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/cwJp67ZkFx1aJjABH43f9we5NGI.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 8</h3>
<p>T1 - EP8</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="8" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/cdCMs2GzhTT9xYMqAWM86ZcYYnD.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 9</h3>
<p>T1 - EP9</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="9" type="checkbox" />
</div>
</li>

<li class="episode-item" data-video-url="__URL__" data-season="season1" >
<img src="https://image.tmdb.org/t/p/w300/hlvrlVBaYRbzFMQLtF6DkcNIwry.jpg" alt="Thumbnail">
<div class="episode-info">
<h3>Episode 10</h3>
<p>T1 - EP10</p>
</div>
<div class="toggle">
<label>NO VISTO</label>
<input data-episode="10" type="checkbox" />
</div>
</li>
      <!-- Agrega más episodios aquí -->
    </ul>
  </div>
</div>

<!-- Navegación inferior -->
<div class="bottom-nav">
  <a class="active" href="go:inicio">
    <i class="fa fa-arrow-left"></i>
    <span>Regresar</span>
  </a>
  <a href="#">
    <i class="fas fa-search"></i>
    <span>Buscar</span>
  </a>
</div>

<script>
const serieId = "The Returned";

document.addEventListener('DOMContentLoaded', function () {
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  const episodeItems = document.querySelectorAll('.episode-item');
  const mainVideo = document.getElementById('main-video');
  const seasonSelect = document.getElementById('season-select');
  const episodeList = document.getElementById('episode-list');
  const lastWatchedInfo = document.getElementById('last-watched-info');
  const progressInfo = document.getElementById('progress-info');

  // Estado de episodios
  checkboxes.forEach(function (checkbox) {
    const episode = checkbox.getAttribute('data-episode');
    const label = checkbox.previousElementSibling;
    const key = serieId + "-episode-" + episode;
    const storedStatus = localStorage.getItem(key) === 'true';

    checkbox.checked = storedStatus;
    label.textContent = storedStatus ? 'VISTO' : 'NO VISTO';

    checkbox.addEventListener('change', function () {
      const newStatus = checkbox.checked;
      localStorage.setItem(key, newStatus);
      label.textContent = newStatus ? 'VISTO' : 'NO VISTO';
      updateProgress();
    });

    checkbox.addEventListener('click', function (event) {
      event.stopPropagation();
    });
  });

  // Reproducir episodio
  episodeItems.forEach(function (item) {
    item.addEventListener('click', function () {
      const videoUrl = item.getAttribute('data-video-url');
      const season = item.getAttribute('data-season');
      const episode = item.querySelector('input[type="checkbox"]').getAttribute('data-episode');

      mainVideo.src = videoUrl;

      localStorage.setItem(serieId + "-last-watched", videoUrl);
      localStorage.setItem(serieId + "-last-watched-season", season);
      localStorage.setItem(serieId + "-last-watched-ep", episode);

      updateLastWatched();
    });
  });

  // Filtro de temporadas
  seasonSelect.addEventListener('change', function () {
    const selectedSeason = seasonSelect.value;
    const allEpisodes = episodeList.querySelectorAll('.episode-item');

    allEpisodes.forEach(function (ep) {
      ep.style.display = 'none';
    });

    const selectedEpisodes = episodeList.querySelectorAll('.episode-item[data-season="' + selectedSeason + '"]');
    selectedEpisodes.forEach(function (ep) {
      ep.style.display = 'flex';
    });

    updateProgress();
  });

  // Cargar último visto
  const lastVideo = localStorage.getItem(serieId + "-last-watched");
  if (lastVideo) {
    mainVideo.src = lastVideo;
  }

  function updateLastWatched() {
    const ep = localStorage.getItem(serieId + "-last-watched-ep");
    const season = localStorage.getItem(serieId + "-last-watched-season");
    if (ep && season) {
      lastWatchedInfo.textContent = "Último episodio visto: " + season.toUpperCase() + " - EP" + ep;
    } else {
      lastWatchedInfo.textContent = '';
    }
  }

  function updateProgress() {
    const selectedSeason = seasonSelect.value;
    const episodes = episodeList.querySelectorAll('.episode-item[data-season="' + selectedSeason + '"]');

    let total = 0;
    let vistos = 0;

    episodes.forEach(function (ep) {
      const checkbox = ep.querySelector('input[type="checkbox"]');
      total++;
      if (checkbox.checked) {
        vistos++;
      }
    });

    progressInfo.textContent = "Progreso: " + vistos + " de " + total + " episodios vistos";
  }

  // Reiniciar progreso
  document.getElementById('reset-progress').addEventListener('click', function () {
    if (confirm('¿Estás seguro de que deseas reiniciar todo el progreso?')) {
      checkboxes.forEach(function (checkbox) {
        const episode = checkbox.getAttribute('data-episode');
        const key = serieId + "-episode-" + episode;
        localStorage.removeItem(key);
        checkbox.checked = false;
        checkbox.previousElementSibling.textContent = 'NO VISTO';
      });

      localStorage.removeItem(serieId + "-last-watched");
      localStorage.removeItem(serieId + "-last-watched-ep");
      localStorage.removeItem(serieId + "-last-watched-season");

      mainVideo.src = '';
      lastWatchedInfo.textContent = '';
      progressInfo.textContent = 'Progreso: 0 episodios vistos';
    }
  });

  // Inicialización
  seasonSelect.dispatchEvent(new Event('change'));
  updateLastWatched();
});

// Mostrar/ocultar sinopsis
function toggleSynopsis() {
  const synopsis = document.getElementById('synopsis');
  const button = document.querySelector('.synopsis-button');
  if (synopsis.style.display === 'none' || synopsis.style.display === '') {
    synopsis.style.display = 'block';
    button.innerText = 'Ocultar sinopsis';
  } else {
    synopsis.style.display = 'none';
    button.innerText = 'Ver sinopsis';
  }
}
</script>

</body>
</html>
